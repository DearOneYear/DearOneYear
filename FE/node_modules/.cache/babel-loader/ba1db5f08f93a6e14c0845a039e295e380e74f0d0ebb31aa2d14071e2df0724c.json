{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Ditto/Documents/DearOneYear/FE/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Ditto/Documents/DearOneYear/FE/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/Ditto/Documents/DearOneYear/FE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Ditto/Documents/DearOneYear/FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from\"react-router-dom\";import dummyLetter from\"../letterbox/dummy/dummyLetter.json\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OpenPhoto=function OpenPhoto(){// 뒤로 가기\nvar navigate=useNavigate();var handleGoBack=function handleGoBack(){navigate(-1);};var currUrl=window.document.location.href;var urlArr=currUrl.split(\"/\");var letterId=parseInt(urlArr[urlArr.length-2]);var letters=dummyLetter.letters;var currLetter;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dbLetter=_useState2[0],setDbLetter=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),accessToken=_useState4[0],setAccessToken=_useState4[1];var getCookie=function getCookie(){var cookie=document.cookie.split(\";\");var cookieArr=[];cookie.map(function(e){var c=e.split(\"=\");cookieArr.push(c);});setAccessToken(cookieArr[2][1]);};var getLetter=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:8000/letter/postbox/\",{headers:{Authorization:\"Bearer \".concat(accessToken)}}).then(function(res){setDbLetter(_toConsumableArray(res.data));}).catch(function(err){console.log(err);});case 2:dbLetter.map(function(l){if(l.id===letterId){currLetter=l;}});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getLetter(){return _ref.apply(this,arguments);};}();useEffect(function(){getCookie();getLetter();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD3B8\\uC9C0\\uAC00 \\uB3C4\\uCC29\\uD588\\uC5B4\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGoBack,children:\"\\uB4A4\\uB85C \\uAC00\\uAE30\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{alt:\"gift_photo\",src:currLetter.image}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{children:\"\\uC0C8\\uB85C\\uC6B4 \\uD3B8\\uC9C0 \\uD558\\uB7EC \\uAC00\\uAE30\"})]});};export default OpenPhoto;","map":{"version":3,"names":["useNavigate","dummyLetter","useState","useEffect","axios","OpenPhoto","navigate","handleGoBack","currUrl","window","document","location","href","urlArr","split","letterId","parseInt","length","letters","currLetter","dbLetter","setDbLetter","accessToken","setAccessToken","getCookie","cookie","cookieArr","map","e","c","push","getLetter","get","headers","Authorization","then","res","data","catch","err","console","log","l","id","image"],"sources":["C:/Users/Ditto/Documents/DearOneYear/FE/src/routes/reading/OpenPhoto.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\r\nimport dummyLetter from \"../letterbox/dummy/dummyLetter.json\";\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst OpenPhoto = () => {\r\n  // 뒤로 가기\r\n  const navigate = useNavigate();\r\n  const handleGoBack = () => {\r\n    navigate(-1);\r\n  };\r\n\r\n  let currUrl = window.document.location.href;\r\n  let urlArr = currUrl.split(\"/\");\r\n  let letterId = parseInt(urlArr[urlArr.length - 2]);\r\n\r\n  let letters = dummyLetter.letters;\r\n  let currLetter;\r\n\r\n  let [dbLetter, setDbLetter] = useState([]);\r\n  let [accessToken, setAccessToken] = useState(\"\");\r\n\r\n  const getCookie = () => {\r\n    let cookie = document.cookie.split(\";\");\r\n    let cookieArr = [];\r\n    cookie.map((e) => {\r\n      let c = e.split(\"=\");\r\n      cookieArr.push(c);\r\n    });\r\n    setAccessToken(cookieArr[2][1]);\r\n  };\r\n\r\n  const getLetter = async () => {\r\n    await axios\r\n      .get(\"http://localhost:8000/letter/postbox/\", {\r\n        headers: { Authorization: `Bearer ${accessToken}` },\r\n      })\r\n      .then((res) => {\r\n        setDbLetter([...res.data]);\r\n      })\r\n      .catch(function (err) {\r\n        console.log(err);\r\n      });\r\n\r\n    dbLetter.map((l) => {\r\n      if (l.id === letterId) {\r\n        currLetter = l;\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getCookie();\r\n    getLetter();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>편지가 도착했어요</h1>\r\n      <button onClick={handleGoBack}>뒤로 가기</button>\r\n      <br />\r\n      <img alt=\"gift_photo\" src={currLetter.image} />\r\n      <br />\r\n      <button>새로운 편지 하러 가기</button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OpenPhoto;\r\n"],"mappings":"4gBAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,YAAW,KAAM,qCAAqC,CAC7D,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,MAAK,KAAM,OAAO,CAAC,6IAE1B,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB;AACA,GAAMC,SAAQ,CAAGN,WAAW,EAAE,CAC9B,GAAMO,aAAY,CAAG,QAAfA,aAAY,EAAS,CACzBD,QAAQ,CAAC,CAAC,CAAC,CAAC,CACd,CAAC,CAED,GAAIE,QAAO,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,IAAI,CAC3C,GAAIC,OAAM,CAAGL,OAAO,CAACM,KAAK,CAAC,GAAG,CAAC,CAC/B,GAAIC,SAAQ,CAAGC,QAAQ,CAACH,MAAM,CAACA,MAAM,CAACI,MAAM,CAAG,CAAC,CAAC,CAAC,CAElD,GAAIC,QAAO,CAAGjB,WAAW,CAACiB,OAAO,CACjC,GAAIC,WAAU,CAEd,cAA8BjB,QAAQ,CAAC,EAAE,CAAC,wCAArCkB,QAAQ,eAAEC,WAAW,eAC1B,eAAoCnB,QAAQ,CAAC,EAAE,CAAC,yCAA3CoB,WAAW,eAAEC,cAAc,eAEhC,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB,GAAIC,OAAM,CAAGf,QAAQ,CAACe,MAAM,CAACX,KAAK,CAAC,GAAG,CAAC,CACvC,GAAIY,UAAS,CAAG,EAAE,CAClBD,MAAM,CAACE,GAAG,CAAC,SAACC,CAAC,CAAK,CAChB,GAAIC,EAAC,CAAGD,CAAC,CAACd,KAAK,CAAC,GAAG,CAAC,CACpBY,SAAS,CAACI,IAAI,CAACD,CAAC,CAAC,CACnB,CAAC,CAAC,CACFN,cAAc,CAACG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACjC,CAAC,CAED,GAAMK,UAAS,4FAAG,2JACV3B,MAAK,CACR4B,GAAG,CAAC,uCAAuC,CAAE,CAC5CC,OAAO,CAAE,CAAEC,aAAa,kBAAYZ,WAAW,CAAG,CACpD,CAAC,CAAC,CACDa,IAAI,CAAC,SAACC,GAAG,CAAK,CACbf,WAAW,oBAAKe,GAAG,CAACC,IAAI,EAAE,CAC5B,CAAC,CAAC,CACDC,KAAK,CAAC,SAAUC,GAAG,CAAE,CACpBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAClB,CAAC,CAAC,QAEJnB,QAAQ,CAACO,GAAG,CAAC,SAACe,CAAC,CAAK,CAClB,GAAIA,CAAC,CAACC,EAAE,GAAK5B,QAAQ,CAAE,CACrBI,UAAU,CAAGuB,CAAC,CAChB,CACF,CAAC,CAAC,CAAC,sDACJ,kBAjBKX,UAAS,0CAiBd,CAED5B,SAAS,CAAC,UAAM,CACdqB,SAAS,EAAE,CACXO,SAAS,EAAE,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,wCACE,yEAAkB,cAClB,eAAQ,OAAO,CAAExB,YAAa,uCAAe,cAC7C,aAAM,cACN,YAAK,GAAG,CAAC,YAAY,CAAC,GAAG,CAAEY,UAAU,CAACyB,KAAM,EAAG,cAC/C,aAAM,cACN,qFAA6B,GAC5B,CAEP,CAAC,CAED,cAAevC,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}